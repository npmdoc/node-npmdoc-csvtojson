<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://keyangxiang.com/blog/csv2json/"

    >csvtojson (v1.1.4)</a>
</h1>
<h4>A tool concentrating on converting csv data to JSON with customised parser supporting</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson">module csvtojson</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.csvtojson">
            function <span class="apidocSignatureSpan"></span>csvtojson
            <span class="apidocSignatureSpan">(param, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError">
            function <span class="apidocSignatureSpan">csvtojson.</span>CSVError
            <span class="apidocSignatureSpan">(err, index, extra)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter">
            function <span class="apidocSignatureSpan">csvtojson.</span>Converter
            <span class="apidocSignatureSpan">(params, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.index">
            function <span class="apidocSignatureSpan">csvtojson.</span>index
            <span class="apidocSignatureSpan">(param, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser">
            function <span class="apidocSignatureSpan">csvtojson.</span>parser
            <span class="apidocSignatureSpan">(name, regExp, parser, processSafe)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>CSVError.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>Converter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>interfaces</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>main</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parserMgr</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser_array</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser_flat</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser_json</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser_jsonarray</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>parser_omit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.</span>webServer</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.CSVError">module csvtojson.CSVError</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.CSVError">
            function <span class="apidocSignatureSpan">csvtojson.</span>CSVError
            <span class="apidocSignatureSpan">(err, index, extra)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.column_mismatched">
            function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>column_mismatched
            <span class="apidocSignatureSpan">(index, extra)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.fromArray">
            function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>fromArray
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.super_">
            function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.unclosed_quote">
            function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>unclosed_quote
            <span class="apidocSignatureSpan">(index, extra)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.CSVError.prototype">module csvtojson.CSVError.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.CSVError.prototype.toString">
            function <span class="apidocSignatureSpan">csvtojson.CSVError.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.Converter">module csvtojson.Converter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.Converter">
            function <span class="apidocSignatureSpan">csvtojson.</span>Converter
            <span class="apidocSignatureSpan">(params, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.super_">
            function <span class="apidocSignatureSpan">csvtojson.Converter.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.Converter.prototype">module csvtojson.Converter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype._flush">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_flush
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype._preProcessLines">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_preProcessLines
            <span class="apidocSignatureSpan">(lines, startIdx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype._transform">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_transform
            <span class="apidocSignatureSpan">(data, encoding, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.checkAndFlush">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>checkAndFlush
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.emitResult">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>emitResult
            <span class="apidocSignatureSpan">(r)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.fromFile">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromFile
            <span class="apidocSignatureSpan">(filePath, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.fromStream">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromStream
            <span class="apidocSignatureSpan">(readStream, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.fromString">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromString
            <span class="apidocSignatureSpan">(csvString, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.getEol">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>getEol
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.initWorker">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>initWorker
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.preFileLine">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preFileLine
            <span class="apidocSignatureSpan">(func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.preProcessLine">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preProcessLine
            <span class="apidocSignatureSpan">(line, lineNumber)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.preProcessRaw">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preProcessRaw
            <span class="apidocSignatureSpan">(data, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.preRawData">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preRawData
            <span class="apidocSignatureSpan">(func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.prepareData">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>prepareData
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.processData">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processData
            <span class="apidocSignatureSpan">(data, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.processHead">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processHead
            <span class="apidocSignatureSpan">(fileLine, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.processResult">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processResult
            <span class="apidocSignatureSpan">(result)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.setPartialData">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>setPartialData
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.transf">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>transf
            <span class="apidocSignatureSpan">(func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.workerProcess">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>workerProcess
            <span class="apidocSignatureSpan">(fileLine, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.Converter.prototype.wrapCallback">
            function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>wrapCallback
            <span class="apidocSignatureSpan">(cb, clean)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.index">module csvtojson.index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.index.index">
            function <span class="apidocSignatureSpan">csvtojson.</span>index
            <span class="apidocSignatureSpan">(param, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.index.Converter">
            function <span class="apidocSignatureSpan">csvtojson.index.</span>Converter
            <span class="apidocSignatureSpan">(params, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.index.</span>interfaces</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.main">module csvtojson.main</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.main.convertFile">
            function <span class="apidocSignatureSpan">csvtojson.main.</span>convertFile
            <span class="apidocSignatureSpan">(fileName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.main.convertString">
            function <span class="apidocSignatureSpan">csvtojson.main.</span>convertString
            <span class="apidocSignatureSpan">(csvString)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser">module csvtojson.parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.parser">
            function <span class="apidocSignatureSpan">csvtojson.</span>parser
            <span class="apidocSignatureSpan">(name, regExp, parser, processSafe)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser.prototype">module csvtojson.parser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.clone">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.convertType">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>convertType
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.getHead">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getHead
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.getHeadStr">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getHeadStr
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.getName">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getName
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.initHead">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>initHead
            <span class="apidocSignatureSpan">(columnTitle)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.parse">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>parse
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.setParam">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>setParam
            <span class="apidocSignatureSpan">(param)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser.prototype.test">
            function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>test
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parserMgr">module csvtojson.parserMgr</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parserMgr.addParser">
            function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>addParser
            <span class="apidocSignatureSpan">(name, regExp, parseFunc)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parserMgr.getParser">
            function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>getParser
            <span class="apidocSignatureSpan">(columnTitle, param)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parserMgr.initParsers">
            function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>initParsers
            <span class="apidocSignatureSpan">(row, param)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser_array">module csvtojson.parser_array</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">csvtojson.parser_array.</span>processSafe</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser_array.parserFunc">
            function <span class="apidocSignatureSpan">csvtojson.parser_array.</span>parserFunc
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.parser_array.</span>regExp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">csvtojson.parser_array.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser_flat">module csvtojson.parser_flat</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">csvtojson.parser_flat.</span>processSafe</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser_flat.parserFunc">
            function <span class="apidocSignatureSpan">csvtojson.parser_flat.</span>parserFunc
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.parser_flat.</span>regExp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">csvtojson.parser_flat.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser_json">module csvtojson.parser_json</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">csvtojson.parser_json.</span>processSafe</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser_json.parserFunc">
            function <span class="apidocSignatureSpan">csvtojson.parser_json.</span>parserFunc
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.parser_json.</span>regExp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">csvtojson.parser_json.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser_jsonarray">module csvtojson.parser_jsonarray</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">csvtojson.parser_jsonarray.</span>processSafe</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser_jsonarray.parserFunc">
            function <span class="apidocSignatureSpan">csvtojson.parser_jsonarray.</span>parserFunc
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.parser_jsonarray.</span>regExp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">csvtojson.parser_jsonarray.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.parser_omit">module csvtojson.parser_omit</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">csvtojson.parser_omit.</span>processSafe</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.parser_omit.parserFunc">
            function <span class="apidocSignatureSpan">csvtojson.parser_omit.</span>parserFunc
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">csvtojson.parser_omit.</span>regExp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">csvtojson.parser_omit.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.csvtojson.webServer">module csvtojson.webServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.csvtojson.webServer.startWebServer">
            function <span class="apidocSignatureSpan">csvtojson.webServer.</span>startWebServer
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson" id="apidoc.module.csvtojson">module csvtojson</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.csvtojson" id="apidoc.element.csvtojson.csvtojson">
        function <span class="apidocSignatureSpan"></span>csvtojson
        <span class="apidocSignatureSpan">(param, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function constructor(param, options){
  return new module.exports.Converter(param,options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.CSVError" id="apidoc.element.csvtojson.CSVError">
        function <span class="apidocSignatureSpan">csvtojson.</span>CSVError
        <span class="apidocSignatureSpan">(err, index, extra)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CSVError(err, index, extra){
  Error.call(this,&#x22;&#x22;);
  this.err=err;
  this.line=index;
  this.extra=extra;
  this.message=&#x22;Error: &#x22;+err+&#x22;. JSON Line number: &#x22;+index+ (extra?&#x22; near: &#x22;+extra:&#x22;&#x22;);
  this.name=&#x22;CSV Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter" id="apidoc.element.csvtojson.Converter">
        function <span class="apidocSignatureSpan">csvtojson.</span>Converter
        <span class="apidocSignatureSpan">(params, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Converter(params, options) {
  Transform.call(this, options);
  _param = defParam(params);
  this._options = options || {};
  this.param = _param;
  this.param._options = this._options;
  // this.resultObject = new Result(this);
  // this.pipe(this.resultObject); // it is important to have downstream for a transform otherwise it will stuck
  this.started = false;//indicate if parsing has started.
  this.recordNum = 0;
  this.lineNumber = 0; //file line number
  this._csvLineBuffer = &#x22;&#x22;;
  this.lastIndex = 0; // index in result json array
  //this._pipe(this.lineParser).pipe(this.processor);
  // this.initNoFork();
  if (this.param.forked) {
    this.param.forked = false;
    this.workerNum = 2;
  }
  this.flushCb = null;
  this.processEnd = false;
  this.sequenceBuffer = [];
  this._needJson = null;
  this._needEmitResult = null;
  this._needEmitFinalResult = null;
  this._needEmitJson = null;
  this._needPush = null;
  this._needEmitCsv = null;
  this._csvTransf = null;
  this.finalResult = [];
  // this.on(&#x22;data&#x22;, function() {});
  this.on(&#x22;error&#x22;, emitDone(this));
  this.on(&#x22;end&#x22;, emitDone(this));
  this.initWorker();
  process.nextTick(function () {
    if (this._needEmitFinalResult === null) {
      this._needEmitFinalResult = this.listeners(&#x22;end_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitResult === null) {
      this._needEmitResult = this.listeners(&#x22;record_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitJson === null) {
      this._needEmitJson = this.listeners(&#x22;json&#x22;).length &#x3e; 0
    }
    if (this._needEmitCsv === null) {
      this._needEmitCsv = this.listeners(&#x22;csv&#x22;).length &#x3e; 0
    }
    if (this._needJson === null) {
      this._needJson = this._needEmitJson || this._needEmitFinalResult || this._needEmitResult || this.transform || this._options
.objectMode;
    }
    if (this._needPush === null) {
      this._needPush = this.listeners(&#x22;data&#x22;).length &#x3e; 0 || this.listeners(&#x22;readable&#x22;).length &#x3e; 0
      // this._needPush=false;
    }
    this.param._needParseJson = this._needJson || this._needPush;


  }.bind(this))
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3e;csvtojson --help

# Params

The constructor of csv Converter allows parameters:

```js
var converter=new require(&#x22;csvtojson&#x22;).<span class="apidocCodeKeywordSpan">Converter</span>({
  constructResult:false,
  workerNum:4,
  noheader:true
});
```

Following parameters are supported:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.index" id="apidoc.element.csvtojson.index">
        function <span class="apidocSignatureSpan">csvtojson.</span>index
        <span class="apidocSignatureSpan">(param, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function constructor(param, options){
  return new module.exports.Converter(param,options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser" id="apidoc.element.csvtojson.parser">
        function <span class="apidocSignatureSpan">csvtojson.</span>parser
        <span class="apidocSignatureSpan">(name, regExp, parser, processSafe)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(name, regExp, parser, processSafe) {
  this.name = typeof name === &#x22;undefined&#x22; ? &#x22;Default&#x22; : name;
  this.regExp = null;
  this.type = &#x22;&#x22;;
  this.processSafe = processSafe;
  if (typeof regExp !== &#x22;undefined&#x22;) {
    if (typeof regExp === &#x22;string&#x22;) {
      this.regExp = new RegExp(regExp);
    } else {
      this.regExp = regExp;
    }
  }
  if (typeof parser !== &#x22;undefined&#x22;) {
    this.parse = parser;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.CSVError" id="apidoc.module.csvtojson.CSVError">module csvtojson.CSVError</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.CSVError" id="apidoc.element.csvtojson.CSVError.CSVError">
        function <span class="apidocSignatureSpan">csvtojson.</span>CSVError
        <span class="apidocSignatureSpan">(err, index, extra)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CSVError(err, index, extra){
  Error.call(this,&#x22;&#x22;);
  this.err=err;
  this.line=index;
  this.extra=extra;
  this.message=&#x22;Error: &#x22;+err+&#x22;. JSON Line number: &#x22;+index+ (extra?&#x22; near: &#x22;+extra:&#x22;&#x22;);
  this.name=&#x22;CSV Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.column_mismatched" id="apidoc.element.csvtojson.CSVError.column_mismatched">
        function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>column_mismatched
        <span class="apidocSignatureSpan">(index, extra)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">column_mismatched = function (index, extra){
  return new CSVError(&#x22;column_mismatched&#x22;,index,extra);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return inst;
}
function processRow(row, param, index) {
var i, item, parser, head;
var parseRules = param.parseRules;
if (param.checkColumn &#x26;&#x26; row.length != parseRules.length) {
  return {
    err: CSVError.<span class="apidocCodeKeywordSpan">column_mismatched</span>(index)
  }
}


var headRow = param._headers;
var resultRow = convertRowToJson(row, headRow, param);
if (resultRow) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.fromArray" id="apidoc.element.csvtojson.CSVError.fromArray">
        function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>fromArray
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromArray = function (arr){
  return new CSVError(arr[0],arr[1],arr[2]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      rows.pop();
      var res=[];
      rows.forEach(function(row){
        var sp=row.split(eom2);
        res.push({
          index:sp[0],
          row:sp[1],
          err:sp[2]?CSVError.<span class="apidocCodeKeywordSpan">fromArray</span>(JSON.parse(sp[2])):null,
          json:sp[3]
        })
      })
      this.cbResult(res);
    }
    break;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.super_" id="apidoc.element.csvtojson.CSVError.super_">
        function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Error() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.unclosed_quote" id="apidoc.element.csvtojson.CSVError.unclosed_quote">
        function <span class="apidocSignatureSpan">csvtojson.CSVError.</span>unclosed_quote
        <span class="apidocSignatureSpan">(index, extra)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unclosed_quote = function (index, extra){
  return new CSVError(&#x22;unclosed_quote&#x22;,index,extra);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// }
// Converter.prototype._flushFork = function(cb) {
//   this.child.stdin.end();
//   this.child.on(&#x22;exit&#x22;, cb);
// }
Converter.prototype.checkAndFlush = function () {
if (this._csvLineBuffer.length !== 0) {
  this.emit(&#x22;error&#x22;, CSVError.<span class="apidocCodeKeywordSpan">unclosed_quote</span>(this.recordNum, this._csvLineBuffer
), this._csvLineBuffer);
}
if (this.param.toArrayString &#x26;&#x26; this._needPush) {
  this.push(eol + &#x22;]&#x22;, &#x22;utf8&#x22;);
}
if (this.workerMgr &#x26;&#x26; this.workerMgr.isRunning()) {
  this.workerMgr.drain = function () {
    this.flushCb();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.CSVError.prototype" id="apidoc.module.csvtojson.CSVError.prototype">module csvtojson.CSVError.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.CSVError.prototype.toString" id="apidoc.element.csvtojson.CSVError.prototype.toString">
        function <span class="apidocSignatureSpan">csvtojson.CSVError.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (){
  return JSON.stringify([this.err,this.line,this.extra]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
`data` event is emitted for each parsed CSV line. It passes buffer of strigified JSON unless `objectMode` is set true in stream
option.

```js
const csv=require(&#x27;csvtojson&#x27;)
csv()
.on(&#x27;data&#x27;,(data)=&#x3e;{
	//data is a buffer object
	const jsonStr= data.<span class="apidocCodeKeywordSpan">toString</span>(&#x27;utf8&#x27;)
})
```

### error
`error` event is emitted if there is any errors happened during parsing.

```js
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.Converter" id="apidoc.module.csvtojson.Converter">module csvtojson.Converter</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.Converter.Converter" id="apidoc.element.csvtojson.Converter.Converter">
        function <span class="apidocSignatureSpan">csvtojson.</span>Converter
        <span class="apidocSignatureSpan">(params, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Converter(params, options) {
  Transform.call(this, options);
  _param = defParam(params);
  this._options = options || {};
  this.param = _param;
  this.param._options = this._options;
  // this.resultObject = new Result(this);
  // this.pipe(this.resultObject); // it is important to have downstream for a transform otherwise it will stuck
  this.started = false;//indicate if parsing has started.
  this.recordNum = 0;
  this.lineNumber = 0; //file line number
  this._csvLineBuffer = &#x22;&#x22;;
  this.lastIndex = 0; // index in result json array
  //this._pipe(this.lineParser).pipe(this.processor);
  // this.initNoFork();
  if (this.param.forked) {
    this.param.forked = false;
    this.workerNum = 2;
  }
  this.flushCb = null;
  this.processEnd = false;
  this.sequenceBuffer = [];
  this._needJson = null;
  this._needEmitResult = null;
  this._needEmitFinalResult = null;
  this._needEmitJson = null;
  this._needPush = null;
  this._needEmitCsv = null;
  this._csvTransf = null;
  this.finalResult = [];
  // this.on(&#x22;data&#x22;, function() {});
  this.on(&#x22;error&#x22;, emitDone(this));
  this.on(&#x22;end&#x22;, emitDone(this));
  this.initWorker();
  process.nextTick(function () {
    if (this._needEmitFinalResult === null) {
      this._needEmitFinalResult = this.listeners(&#x22;end_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitResult === null) {
      this._needEmitResult = this.listeners(&#x22;record_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitJson === null) {
      this._needEmitJson = this.listeners(&#x22;json&#x22;).length &#x3e; 0
    }
    if (this._needEmitCsv === null) {
      this._needEmitCsv = this.listeners(&#x22;csv&#x22;).length &#x3e; 0
    }
    if (this._needJson === null) {
      this._needJson = this._needEmitJson || this._needEmitFinalResult || this._needEmitResult || this.transform || this._options
.objectMode;
    }
    if (this._needPush === null) {
      this._needPush = this.listeners(&#x22;data&#x22;).length &#x3e; 0 || this.listeners(&#x22;readable&#x22;).length &#x3e; 0
      // this._needPush=false;
    }
    this.param._needParseJson = this._needJson || this._needPush;


  }.bind(this))
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3e;csvtojson --help

# Params

The constructor of csv Converter allows parameters:

```js
var converter=new require(&#x22;csvtojson&#x22;).<span class="apidocCodeKeywordSpan">Converter</span>({
  constructResult:false,
  workerNum:4,
  noheader:true
});
```

Following parameters are supported:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.super_" id="apidoc.element.csvtojson.Converter.super_">
        function <span class="apidocSignatureSpan">csvtojson.Converter.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Transform(options) {
  if (!(this instanceof Transform))
    return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === &#x27;function&#x27;)
      this._transform = options.transform;

    if (typeof options.flush === &#x27;function&#x27;)
      this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.once(&#x27;prefinish&#x27;, function() {
    if (typeof this._flush === &#x27;function&#x27;)
      this._flush(function(er) {
        done(stream, er);
      });
    else
      done(stream);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.Converter.prototype" id="apidoc.module.csvtojson.Converter.prototype">module csvtojson.Converter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype._flush" id="apidoc.element.csvtojson.Converter.prototype._flush">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_flush
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_flush = function (cb) {
  var self = this;
  this.flushCb = function () {
    self.emit(&#x22;end_parsed&#x22;, self.finalResult);
    if (self.workerMgr) {
      self.workerMgr.destroyWorker();
    }
    cb()
    if (!self._needPush) {
      self.emit(&#x22;end&#x22;)
    }
  };
  if (this._csvLineBuffer.length &#x3e; 0) {
    if (this._csvLineBuffer[this._csvLineBuffer.length - 1] != this.getEol()) {
      this._csvLineBuffer += this.getEol();
    }
    this.processData(this._csvLineBuffer, function () {
      this.checkAndFlush();
    }.bind(this));
  } else {
    this.checkAndFlush();
  }
  return;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    if (typeof options.flush === &#x27;function&#x27;)
      this._flush = options.flush;
  }

  this.once(&#x27;prefinish&#x27;, function() {
    if (typeof this._flush === &#x27;function&#x27;)
      this.<span class="apidocCodeKeywordSpan">_flush</span>(function(er) {
        done(stream, er);
      });
    else
      done(stream);
  });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype._preProcessLines" id="apidoc.element.csvtojson.Converter.prototype._preProcessLines">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_preProcessLines
        <span class="apidocSignatureSpan">(lines, startIdx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_preProcessLines = function (lines, startIdx) {
  var rtn = []
  for (var i = 0; i &#x3c; lines.length; i++) {
    var result = this.preProcessLine(lines[i], startIdx + i + 1)
    if (typeof result === &#x22;string&#x22;) {
      rtn.push(result)
    } else {
      rtn.push(lines[i])
      this.emit(&#x22;error&#x22;, new Error(&#x22;preProcessLine should return a string but got: &#x22; + JSON.stringify(result)))
    }
  }
  return rtn
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var params = this.param;
if (params.ignoreEmpty &#x26;&#x26; !params._headers) {
  data = data.trimLeft();
}
var fileLines = fileline(data, this.param)
if (fileLines.lines.length &#x3e; 0) {
  if (this.preProcessLine &#x26;&#x26; typeof this.preProcessLine === &#x22;function&#x22;) {
    fileLines.lines = this.<span class="apidocCodeKeywordSpan">_preProcessLines</span>(fileLines.lines, this.lastIndex)
  }
  if (!params._headers) { //header is not inited. init header
    this.processHead(fileLines, cb);
  } else {
    if (params.workerNum &#x3c;= 1) {
      var lines = fileLineToCSVLine(fileLines, params);
      this.setPartialData(lines.partial);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype._transform" id="apidoc.element.csvtojson.Converter.prototype._transform">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>_transform
        <span class="apidocSignatureSpan">(data, encoding, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_transform = function (data, encoding, cb) {
  if (this.param.toArrayString &#x26;&#x26; this.started === false) {
    this.started = true;
    if (this._needPush) {
      this.push(&#x22;[&#x22; + eol, &#x22;utf8&#x22;);
    }
  }
  data = data.toString(&#x22;utf8&#x22;);
  var self = this;
  this.preProcessRaw(data, function (d) {
    if (d &#x26;&#x26; d.length &#x3e; 0) {
      self.processData(self.prepareData(d), cb);
    } else {
      cb();
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function(n) {
  var ts = this._transformState;

  if (ts.writechunk !== null &#x26;&#x26; ts.writecb &#x26;&#x26; !ts.transforming) {
    ts.transforming = true;
    this.<span class="apidocCodeKeywordSpan">_transform</span>(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we&#x27;ve asked for it.
    ts.needTransform = true;
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.checkAndFlush" id="apidoc.element.csvtojson.Converter.prototype.checkAndFlush">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>checkAndFlush
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkAndFlush = function () {
  if (this._csvLineBuffer.length !== 0) {
    this.emit(&#x22;error&#x22;, CSVError.unclosed_quote(this.recordNum, this._csvLineBuffer), this._csvLineBuffer);
  }
  if (this.param.toArrayString &#x26;&#x26; this._needPush) {
    this.push(eol + &#x22;]&#x22;, &#x22;utf8&#x22;);
  }
  if (this.workerMgr &#x26;&#x26; this.workerMgr.isRunning()) {
    this.workerMgr.drain = function () {
      this.flushCb();
    }.bind(this);
  } else {
    this.flushCb();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  };
  if (this._csvLineBuffer.length &#x3e; 0) {
    if (this._csvLineBuffer[this._csvLineBuffer.length - 1] != this.getEol()) {
      this._csvLineBuffer += this.getEol();
    }
    this.processData(this._csvLineBuffer, function () {
      this.<span class="apidocCodeKeywordSpan">checkAndFlush</span>();
    }.bind(this));
  } else {
    this.checkAndFlush();
  }
  return;
};
// Converter.prototype._transformFork = function(data, encoding, cb) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.emitResult" id="apidoc.element.csvtojson.Converter.prototype.emitResult">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>emitResult
        <span class="apidocSignatureSpan">(r)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitResult = function (r) {
  var index = r.index;
  var row = r.row;
  var result = r.json;
  var resultJson = null;
  var resultStr = null;
  if (typeof result === &#x22;string&#x22;) {
    resultStr = result;
  } else {
    resultJson = result;
  }
  if (resultJson === null &#x26;&#x26; this._needJson) {
    resultJson = JSON.parse(resultStr)
    if (typeof row === &#x22;string&#x22;) {
      row = JSON.parse(row)
    }
  }
  if (this.transform &#x26;&#x26; typeof this.transform === &#x22;function&#x22;) {
    this.transform(resultJson, row, index);
    resultStr = null;
  }
  if (this._needEmitJson) {
    this.emit(&#x22;json&#x22;, resultJson, index)
  }
  if (this._needEmitCsv) {
    if (typeof row === &#x22;string&#x22;) {
      row = JSON.parse(row)
    }
    this.emit(&#x22;csv&#x22;, row, index)
  }
  if (this.param.constructResult &#x26;&#x26; this._needEmitFinalResult) {
    this.finalResult.push(resultJson)
  }
  if (this._needEmitResult) {
    this.emit(&#x22;record_parsed&#x22;, resultJson, row, index);
  }
  if (this.param.toArrayString &#x26;&#x26; index &#x3e; 0 &#x26;&#x26; this._needPush) {
    this.push(&#x22;,&#x22; + eol);
  }
  if (this._options &#x26;&#x26; this._options.objectMode) {
    this.push(resultJson);
  } else {
    if (this._needPush) {
      if (resultStr === null) {
        resultStr = JSON.stringify(resultJson)
      }
      this.push(!this.param.toArrayString ? resultStr + eol : resultStr, &#x22;utf8&#x22;);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Converter.prototype.processResult = function (result) {

  for (var i = 0; i &#x3c; result.length; i++) {
    var r = result[i];
    if (r.err) {
      this.emit(&#x22;error&#x22;, r.err);
    } else {
      this.<span class="apidocCodeKeywordSpan">emitResult</span>(r);
    }
  }
  // this.lastIndex+=result.length;
  // cb();
}

Converter.prototype.emitResult = function (r) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.fromFile" id="apidoc.element.csvtojson.Converter.prototype.fromFile">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromFile
        <span class="apidocSignatureSpan">(filePath, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromFile = function (filePath, cb) {
  var fs = require(&#x27;fs&#x27;);
  var rs = null;
  this.wrapCallback(cb, function () {
    if (rs &#x26;&#x26; rs.destroy) {
      rs.destroy();
    }
  });
  fs.exists(filePath, function (exist) {
    if (exist) {
      rs = fs.createReadStream(filePath);
      rs.pipe(this);
    } else {
      this.emit(&#x27;error&#x27;, new Error(&#x22;File not exist&#x22;))
    }
  }.bind(this));
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
a,b,c
1,2,3
4,5,6
*/
const csvFilePath=&#x27;&#x3c;path to csv file&#x3e;&#x27;
const csv=require(&#x27;csvtojson&#x27;)
csv()
.<span class="apidocCodeKeywordSpan">fromFile</span>(csvFilePath)
.on(&#x27;json&#x27;,(jsonObj)=&#x3e;{
	// combine csv header row and csv line to a json object
	// jsonObj.a ==&#x3e; 1 or 4
})
.on(&#x27;done&#x27;,(error)=&#x3e;{
	console.log(&#x27;end&#x27;)
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.fromStream" id="apidoc.element.csvtojson.Converter.prototype.fromStream">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromStream
        <span class="apidocSignatureSpan">(readStream, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromStream = function (readStream, cb) {
  if (cb &#x26;&#x26; typeof cb === &#x22;function&#x22;) {
    this.wrapCallback(cb);
  }
  readStream.pipe(this);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### From CSV Stream

```js
//const csvReadStream -- Readable stream for csv source
const csv=require(&#x27;csvtojson&#x27;)

csv()
.<span class="apidocCodeKeywordSpan">fromStream</span>(csvReadStream)
.on(&#x27;csv&#x27;,(csvRow)=&#x3e;{
	// csvRow is an array
})
.on(&#x27;done&#x27;,(error)=&#x3e;{

})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.fromString" id="apidoc.element.csvtojson.Converter.prototype.fromString">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>fromString
        <span class="apidocSignatureSpan">(csvString, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromString = function (csvString, cb) {
  if (typeof csvString != &#x22;string&#x22;) {
    return cb(new Error(&#x22;Passed CSV Data is not a string.&#x22;));
  }
  if (cb &#x26;&#x26; typeof cb === &#x22;function&#x22;) {
    this.wrapCallback(cb, function () {
    });
  }
  process.nextTick(function () {
    this.end(csvString)
  }.bind(this))
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
csvStr:
1,2,3
4,5,6
7,8,9
*/
const csv=require(&#x27;csvtojson&#x27;)
csv({noheader:true})
.<span class="apidocCodeKeywordSpan">fromString</span>(csvStr)
.on(&#x27;csv&#x27;,(csvRow)=&#x3e;{ // this func will be called 3 times
	console.log(csvRow) // =&#x3e; [1,2,3] , [4,5,6]  , [7,8,9]
})
.on(&#x27;done&#x27;,()=&#x3e;{
	//parsing finished
})
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.getEol" id="apidoc.element.csvtojson.Converter.prototype.getEol">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>getEol
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEol = function (data) {
  if (!this.param.eol &#x26;&#x26; data) {
    for (var i = 0; i &#x3c; data.length; i++) {
      if (data[i] === &#x22;\r&#x22;) {
        if (data[i + 1] === &#x22;\n&#x22;) {
          this.param.eol = &#x22;\r\n&#x22;;
        } else {
          this.param.eol = &#x22;\r&#x22;;
        }
        return this.param.eol;
      } else if (data[i] === &#x22;\n&#x22;) {
        this.param.eol = &#x22;\n&#x22;;
        return this.param.eol;
      }
    }
    this.param.eol = eol;
  }

  return this.param.eol || eol;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * workerpRocess does not support embeded multiple lines.
 */

Converter.prototype.workerProcess = function (fileLine, cb) {
var self = this;
var line = fileLine
var eol = this.<span class="apidocCodeKeywordSpan">getEol</span>()
this.setPartialData(line.partial)
this.workerMgr.sendWorker(line.lines.join(eol) + eol, this.lastIndex, cb, function (results, lastIndex) {
  var cur = self.sequenceBuffer[0];
  if (cur.idx === lastIndex) {
    cur.result = results;
    var records = [];
    while (self.sequenceBuffer[0] &#x26;&#x26; self.sequenceBuffer[0].result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.initWorker" id="apidoc.element.csvtojson.Converter.prototype.initWorker">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>initWorker
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initWorker = function () {
  var workerNum = this.param.workerNum - 1;
  if (workerNum &#x3e; 0) {
    this.workerMgr = workerMgr();
    this.workerMgr.initWorker(workerNum, this.param);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._needPush = null;
this._needEmitCsv = null;
this._csvTransf = null;
this.finalResult = [];
// this.on(&#x22;data&#x22;, function() {});
this.on(&#x22;error&#x22;, emitDone(this));
this.on(&#x22;end&#x22;, emitDone(this));
this.<span class="apidocCodeKeywordSpan">initWorker</span>();
process.nextTick(function () {
  if (this._needEmitFinalResult === null) {
    this._needEmitFinalResult = this.listeners(&#x22;end_parsed&#x22;).length &#x3e; 0
  }
  if (this._needEmitResult === null) {
    this._needEmitResult = this.listeners(&#x22;record_parsed&#x22;).length &#x3e; 0
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.preFileLine" id="apidoc.element.csvtojson.Converter.prototype.preFileLine">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preFileLine
        <span class="apidocSignatureSpan">(func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preFileLine = function (func) {
  this.preProcessLine = func;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
the function in `preRawData` will be called directly with the string from upper stream.

### CSV File Line Hook

```js
const csv=require(&#x27;csvtojson&#x27;)
csv()
.<span class="apidocCodeKeywordSpan">preFileLine</span>((fileLineString, lineIdx)=&#x3e;{
	if (lineIdx === 2){
		return fileLineString.replace(&#x27;some value&#x27;,&#x27;another value&#x27;)
	}
	return fileLineString
})
.on(&#x27;json&#x27;,(jsonObj)=&#x3e;{
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.preProcessLine" id="apidoc.element.csvtojson.Converter.prototype.preProcessLine">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preProcessLine
        <span class="apidocSignatureSpan">(line, lineNumber)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preProcessLine = function (line, lineNumber) {
  return line;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.setPartialData(fileLines.partial)
  cb();
}
}
Converter.prototype._preProcessLines = function (lines, startIdx) {
var rtn = []
for (var i = 0; i &#x3c; lines.length; i++) {
  var result = this.<span class="apidocCodeKeywordSpan">preProcessLine</span>(lines[i], startIdx + i + 1)
  if (typeof result === &#x22;string&#x22;) {
    rtn.push(result)
  } else {
    rtn.push(lines[i])
    this.emit(&#x22;error&#x22;, new Error(&#x22;preProcessLine should return a string but got: &#x22; + JSON.stringify(result)))
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.preProcessRaw" id="apidoc.element.csvtojson.Converter.prototype.preProcessRaw">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preProcessRaw
        <span class="apidocSignatureSpan">(data, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preProcessRaw = function (data, cb) {
  cb(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.started = true;
    if (this._needPush) {
      this.push(&#x22;[&#x22; + eol, &#x22;utf8&#x22;);
    }
  }
  data = data.toString(&#x22;utf8&#x22;);
  var self = this;
  this.<span class="apidocCodeKeywordSpan">preProcessRaw</span>(data, function (d) {
    if (d &#x26;&#x26; d.length &#x3e; 0) {
      self.processData(self.prepareData(d), cb);
    } else {
      cb();
    }
  })
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.preRawData" id="apidoc.element.csvtojson.Converter.prototype.preRawData">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>preRawData
        <span class="apidocSignatureSpan">(func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preRawData = function (func) {
  this.preProcessRaw = func;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Hook &#x26; Transform

### Raw CSV Data Hook

```js
const csv=require(&#x27;csvtojson&#x27;)
csv()
.<span class="apidocCodeKeywordSpan">preRawData</span>((csvRawData,cb)=&#x3e;{
	var newData=csvRawData.replace(&#x27;some value&#x27;,&#x27;another value&#x27;)
	cb(newData);
})
.on(&#x27;json&#x27;,(jsonObj)=&#x3e;{

});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.prepareData" id="apidoc.element.csvtojson.Converter.prototype.prepareData">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>prepareData
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepareData = function (data) {
  return this._csvLineBuffer + data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.push(&#x22;[&#x22; + eol, &#x22;utf8&#x22;);
  }
}
data = data.toString(&#x22;utf8&#x22;);
var self = this;
this.preProcessRaw(data, function (d) {
  if (d &#x26;&#x26; d.length &#x3e; 0) {
    self.processData(self.<span class="apidocCodeKeywordSpan">prepareData</span>(d), cb);
  } else {
    cb();
  }
})
};
Converter.prototype.prepareData = function (data) {
return this._csvLineBuffer + data;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.processData" id="apidoc.element.csvtojson.Converter.prototype.processData">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processData
        <span class="apidocSignatureSpan">(data, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processData = function (data, cb) {
  var params = this.param;
  if (params.ignoreEmpty &#x26;&#x26; !params._headers) {
    data = data.trimLeft();
  }
  var fileLines = fileline(data, this.param)
  if (fileLines.lines.length &#x3e; 0) {
    if (this.preProcessLine &#x26;&#x26; typeof this.preProcessLine === &#x22;function&#x22;) {
      fileLines.lines = this._preProcessLines(fileLines.lines, this.lastIndex)
    }
    if (!params._headers) { //header is not inited. init header
      this.processHead(fileLines, cb);
    } else {
      if (params.workerNum &#x3c;= 1) {
        var lines = fileLineToCSVLine(fileLines, params);
        this.setPartialData(lines.partial);
        var jsonArr = linesToJson(lines.lines, params, this.recordNum);
        this.processResult(jsonArr)
        this.lastIndex += jsonArr.length;
        this.recordNum += jsonArr.length;
        cb();
      } else {
        this.workerProcess(fileLines, cb);
      }
    }
  } else {
    this.setPartialData(fileLines.partial)
    cb();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.push(&#x22;[&#x22; + eol, &#x22;utf8&#x22;);
  }
}
data = data.toString(&#x22;utf8&#x22;);
var self = this;
this.preProcessRaw(data, function (d) {
  if (d &#x26;&#x26; d.length &#x3e; 0) {
    self.<span class="apidocCodeKeywordSpan">processData</span>(self.prepareData(d), cb);
  } else {
    cb();
  }
})
};
Converter.prototype.prepareData = function (data) {
return this._csvLineBuffer + data;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.processHead" id="apidoc.element.csvtojson.Converter.prototype.processHead">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processHead
        <span class="apidocSignatureSpan">(fileLine, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processHead = function (fileLine, cb) {
  var params = this.param;
  if (!params._headers) { //header is not inited. init header
    var lines = fileLineToCSVLine(fileLine, params);
    this.setPartialData(lines.partial);
    if (params.noheader) {
      if (params.headers) {
        params._headers = params.headers;
      } else {
        params._headers = [];
      }
    } else {
      var headerRow = lines.lines.shift();
      if (params.headers) {
        params._headers = params.headers;
      } else {
        params._headers = headerRow;
      }
    }
    if (this.param.workerNum &#x3e; 1) {
      this.workerMgr.setParams(params);
    }
    var res = linesToJson(lines.lines, params, 0);
    this.processResult(res);
    this.lastIndex += res.length;
    this.recordNum += res.length;
    cb();
  } else {
    cb();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
var fileLines = fileline(data, this.param)
if (fileLines.lines.length &#x3e; 0) {
  if (this.preProcessLine &#x26;&#x26; typeof this.preProcessLine === &#x22;function&#x22;) {
    fileLines.lines = this._preProcessLines(fileLines.lines, this.lastIndex)
  }
  if (!params._headers) { //header is not inited. init header
    this.<span class="apidocCodeKeywordSpan">processHead</span>(fileLines, cb);
  } else {
    if (params.workerNum &#x3c;= 1) {
      var lines = fileLineToCSVLine(fileLines, params);
      this.setPartialData(lines.partial);
      var jsonArr = linesToJson(lines.lines, params, this.recordNum);
      this.processResult(jsonArr)
      this.lastIndex += jsonArr.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.processResult" id="apidoc.element.csvtojson.Converter.prototype.processResult">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>processResult
        <span class="apidocSignatureSpan">(result)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processResult = function (result) {

  for (var i = 0; i &#x3c; result.length; i++) {
    var r = result[i];
    if (r.err) {
      this.emit(&#x22;error&#x22;, r.err);
    } else {
      this.emitResult(r);
    }
  }
  // this.lastIndex+=result.length;
  // cb();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (!params._headers) { //header is not inited. init header
  this.processHead(fileLines, cb);
} else {
  if (params.workerNum &#x3c;= 1) {
    var lines = fileLineToCSVLine(fileLines, params);
    this.setPartialData(lines.partial);
    var jsonArr = linesToJson(lines.lines, params, this.recordNum);
    this.<span class="apidocCodeKeywordSpan">processResult</span>(jsonArr)
    this.lastIndex += jsonArr.length;
    this.recordNum += jsonArr.length;
    cb();
  } else {
    this.workerProcess(fileLines, cb);
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.setPartialData" id="apidoc.element.csvtojson.Converter.prototype.setPartialData">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>setPartialData
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setPartialData = function (d) {
  this._csvLineBuffer = d;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  fileLines.lines = this._preProcessLines(fileLines.lines, this.lastIndex)
}
if (!params._headers) { //header is not inited. init header
  this.processHead(fileLines, cb);
} else {
  if (params.workerNum &#x3c;= 1) {
    var lines = fileLineToCSVLine(fileLines, params);
    this.<span class="apidocCodeKeywordSpan">setPartialData</span>(lines.partial);
    var jsonArr = linesToJson(lines.lines, params, this.recordNum);
    this.processResult(jsonArr)
    this.lastIndex += jsonArr.length;
    this.recordNum += jsonArr.length;
    cb();
  } else {
    this.workerProcess(fileLines, cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.transf" id="apidoc.element.csvtojson.Converter.prototype.transf">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>transf
        <span class="apidocSignatureSpan">(func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transf = function (func) {
  this.transform = func;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


### Result transform

```js
const csv=require(&#x27;csvtojson&#x27;)
csv()
.<span class="apidocCodeKeywordSpan">transf</span>((jsonObj,csvRow,index)=&#x3e;{
	jsonObj.myNewKey=&#x27;some value&#x27;
})
.on(&#x27;json&#x27;,(jsonObj)=&#x3e;{
	console.log(jsonObj.myNewKey) // some value
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.workerProcess" id="apidoc.element.csvtojson.Converter.prototype.workerProcess">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>workerProcess
        <span class="apidocSignatureSpan">(fileLine, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">workerProcess = function (fileLine, cb) {
  var self = this;
  var line = fileLine
  var eol = this.getEol()
  this.setPartialData(line.partial)
  this.workerMgr.sendWorker(line.lines.join(eol) + eol, this.lastIndex, cb, function (results, lastIndex) {
    var cur = self.sequenceBuffer[0];
    if (cur.idx === lastIndex) {
      cur.result = results;
      var records = [];
      while (self.sequenceBuffer[0] &#x26;&#x26; self.sequenceBuffer[0].result) {
        var buf = self.sequenceBuffer.shift();
        records = records.concat(buf.result)
      }
      self.processResult(records)
      self.recordNum += records.length;
    } else {
      for (var i = 0; i &#x3c; self.sequenceBuffer.length; i++) {
        var buf = self.sequenceBuffer[i];
        if (buf.idx === lastIndex) {
          buf.result = results;
          break;
        }
      }
    }
    // self.processResult(JSON.parse(results),function(){},true);
  })
  this.sequenceBuffer.push({
    idx: this.lastIndex,
    result: null
  });
  this.lastIndex += line.lines.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        this.setPartialData(lines.partial);
        var jsonArr = linesToJson(lines.lines, params, this.recordNum);
        this.processResult(jsonArr)
        this.lastIndex += jsonArr.length;
        this.recordNum += jsonArr.length;
        cb();
      } else {
        this.<span class="apidocCodeKeywordSpan">workerProcess</span>(fileLines, cb);
      }
    }
  } else {
    this.setPartialData(fileLines.partial)
    cb();
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.Converter.prototype.wrapCallback" id="apidoc.element.csvtojson.Converter.prototype.wrapCallback">
        function <span class="apidocSignatureSpan">csvtojson.Converter.prototype.</span>wrapCallback
        <span class="apidocSignatureSpan">(cb, clean)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrapCallback = function (cb, clean) {

  if (clean === undefined) {
    clean = function () { }
  }
  if (cb &#x26;&#x26; typeof cb === &#x22;function&#x22;) {
    this.once(&#x22;end_parsed&#x22;, function (res) {
      if (!this.hasError) {
        cb(null, res);
      }
    }.bind(this));
  }
  this.once(&#x22;error&#x22;, function (err) {
    this.hasError = true;
    if (cb &#x26;&#x26; typeof cb === &#x22;function&#x22;) {
      cb(err);
    }
    clean();
  }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

return this.param.eol || eol;
};
Converter.prototype.fromFile = function (filePath, cb) {
var fs = require(&#x27;fs&#x27;);
var rs = null;
this.<span class="apidocCodeKeywordSpan">wrapCallback</span>(cb, function () {
  if (rs &#x26;&#x26; rs.destroy) {
    rs.destroy();
  }
});
fs.exists(filePath, function (exist) {
  if (exist) {
    rs = fs.createReadStream(filePath);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.index" id="apidoc.module.csvtojson.index">module csvtojson.index</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.index.index" id="apidoc.element.csvtojson.index.index">
        function <span class="apidocSignatureSpan">csvtojson.</span>index
        <span class="apidocSignatureSpan">(param, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function constructor(param, options){
  return new module.exports.Converter(param,options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.index.Converter" id="apidoc.element.csvtojson.index.Converter">
        function <span class="apidocSignatureSpan">csvtojson.index.</span>Converter
        <span class="apidocSignatureSpan">(params, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Converter(params, options) {
  Transform.call(this, options);
  _param = defParam(params);
  this._options = options || {};
  this.param = _param;
  this.param._options = this._options;
  // this.resultObject = new Result(this);
  // this.pipe(this.resultObject); // it is important to have downstream for a transform otherwise it will stuck
  this.started = false;//indicate if parsing has started.
  this.recordNum = 0;
  this.lineNumber = 0; //file line number
  this._csvLineBuffer = &#x22;&#x22;;
  this.lastIndex = 0; // index in result json array
  //this._pipe(this.lineParser).pipe(this.processor);
  // this.initNoFork();
  if (this.param.forked) {
    this.param.forked = false;
    this.workerNum = 2;
  }
  this.flushCb = null;
  this.processEnd = false;
  this.sequenceBuffer = [];
  this._needJson = null;
  this._needEmitResult = null;
  this._needEmitFinalResult = null;
  this._needEmitJson = null;
  this._needPush = null;
  this._needEmitCsv = null;
  this._csvTransf = null;
  this.finalResult = [];
  // this.on(&#x22;data&#x22;, function() {});
  this.on(&#x22;error&#x22;, emitDone(this));
  this.on(&#x22;end&#x22;, emitDone(this));
  this.initWorker();
  process.nextTick(function () {
    if (this._needEmitFinalResult === null) {
      this._needEmitFinalResult = this.listeners(&#x22;end_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitResult === null) {
      this._needEmitResult = this.listeners(&#x22;record_parsed&#x22;).length &#x3e; 0
    }
    if (this._needEmitJson === null) {
      this._needEmitJson = this.listeners(&#x22;json&#x22;).length &#x3e; 0
    }
    if (this._needEmitCsv === null) {
      this._needEmitCsv = this.listeners(&#x22;csv&#x22;).length &#x3e; 0
    }
    if (this._needJson === null) {
      this._needJson = this._needEmitJson || this._needEmitFinalResult || this._needEmitResult || this.transform || this._options
.objectMode;
    }
    if (this._needPush === null) {
      this._needPush = this.listeners(&#x22;data&#x22;).length &#x3e; 0 || this.listeners(&#x22;readable&#x22;).length &#x3e; 0
      // this._needPush=false;
    }
    this.param._needParseJson = this._needJson || this._needPush;


  }.bind(this))
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3e;csvtojson --help

# Params

The constructor of csv Converter allows parameters:

```js
var converter=new require(&#x22;csvtojson&#x22;).<span class="apidocCodeKeywordSpan">Converter</span>({
  constructResult:false,
  workerNum:4,
  noheader:true
});
```

Following parameters are supported:
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.main" id="apidoc.module.csvtojson.main">module csvtojson.main</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.main.convertFile" id="apidoc.element.csvtojson.main.convertFile">
        function <span class="apidocSignatureSpan">csvtojson.main.</span>convertFile
        <span class="apidocSignatureSpan">(fileName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function convertFile(fileName){
    var csvConverter=_initConverter();
    csvConverter.from(fileName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.main.convertString" id="apidoc.element.csvtojson.main.convertString">
        function <span class="apidocSignatureSpan">csvtojson.main.</span>convertString
        <span class="apidocSignatureSpan">(csvString)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function convertString(csvString){
    var csvConverter=_initConverter();
    csvConverter.from(csvString);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser" id="apidoc.module.csvtojson.parser">module csvtojson.parser</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.parser.parser" id="apidoc.element.csvtojson.parser.parser">
        function <span class="apidocSignatureSpan">csvtojson.</span>parser
        <span class="apidocSignatureSpan">(name, regExp, parser, processSafe)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(name, regExp, parser, processSafe) {
  this.name = typeof name === &#x22;undefined&#x22; ? &#x22;Default&#x22; : name;
  this.regExp = null;
  this.type = &#x22;&#x22;;
  this.processSafe = processSafe;
  if (typeof regExp !== &#x22;undefined&#x22;) {
    if (typeof regExp === &#x22;string&#x22;) {
      this.regExp = new RegExp(regExp);
    } else {
      this.regExp = regExp;
    }
  }
  if (typeof parser !== &#x22;undefined&#x22;) {
    this.parse = parser;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser.prototype" id="apidoc.module.csvtojson.parser.prototype">module csvtojson.parser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.clone" id="apidoc.element.csvtojson.parser.prototype.clone">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
  var obj = Object.create(this);
  var newParser = new Parser();
  for (var key in obj) {
    newParser[key] = obj[key];
  }
  return newParser;
  //return new Parser(this.name, this.regExp, this.parse, this.processSafe);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var parser;
  registeredParsers.forEach(function(p){
    if (p.getName() === parserName){
      parser=p;
    }
  });
  if (parser) {
    var inst = parser.<span class="apidocCodeKeywordSpan">clone</span>();
    return inst;
  }
  return new Parser(); //TODO remove new
}
columnTitle = columnTitle ? columnTitle : &#x27;&#x27;;
registeredParsers.forEach(function(p){
  if (p.test(columnTitle)){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.convertType" id="apidoc.element.csvtojson.parser.prototype.convertType">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>convertType
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">convertType = function (item) {
  var type=this.type;
  if (type === &#x27;number&#x27;) {
    var rtn = parseFloat(item);
    if (isNaN(rtn)) {
      return 0;
    } else {
      return rtn;
    }
  } else if (this.param &#x26;&#x26; this.param.checkType &#x26;&#x26; type === &#x27;&#x27;) {
    var trimed = item.trim();
    if (trimed === &#x22;&#x22;){
      return trimed;
    }
    if (!isNaN(trimed)) {
      return parseFloat(trimed);
    } else if (trimed.length === 5 &#x26;&#x26; trimed.toLowerCase() === &#x22;false&#x22;) {
      return false;
    } else if (trimed.length === 4 &#x26;&#x26; trimed.toLowerCase() === &#x22;true&#x22;) {
      return true;
    } else if (trimed[0] === &#x22;{&#x22; &#x26;&#x26; trimed[trimed.length - 1] === &#x22;}&#x22; || trimed[0] === &#x22;[&#x22; &#x26;&#x26; trimed[trimed.length - 1]===&#x22;]&#x22;) {
      try {
        return JSON.parse(trimed);
      } catch (e) {
        return item;
      }
    } else {
      return item;
    }
  }
  return item;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.getHead" id="apidoc.element.csvtojson.parser.prototype.getHead">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getHead
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHead = function () {
  return this.head;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.getHeadStr" id="apidoc.element.csvtojson.parser.prototype.getHeadStr">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getHeadStr
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHeadStr = function () {
  if (this.headStr) {
    return this.headStr;
  } else {
    var head = this.head;
    this.headStr = head.replace(this.regExp, &#x27;&#x27;);
    if (!this.headStr) {
      this.headStr = &#x22;Unknown Header&#x22;;
    }
    return this.getHeadStr();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};
},{}],10:[function(require,module,exports){
module.exports = {
  &#x22;name&#x22;: &#x22;flat&#x22;,
  &#x22;processSafe&#x22;:true,
  &#x22;regExp&#x22;: /^\*flat\*/,
  &#x22;parserFunc&#x22;: function parser_flat (params) {
     var key=this.<span class="apidocCodeKeywordSpan">getHeadStr</span>();
     var val=params.item;
     params.resultRow[key]=val;
  }
};

},{}],11:[function(require,module,exports){
var arrReg = /\[([0-9]*)\]/;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.getName" id="apidoc.element.csvtojson.parser.prototype.getName">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>getName
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getName = function () {
  return this.name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    res.push(r);
  }
}
return res;
}
function getConstParser(number, param) {
var inst = new Parser(&#x22;field&#x22; + number, /.*/, function (params) {
  var name = this.<span class="apidocCodeKeywordSpan">getName</span>();
  params.resultRow[name] = params.item;
}, true);
inst.setParam(param);
return inst;
}
function processRow(row, param, index) {
var i, item, parser, head;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.initHead" id="apidoc.element.csvtojson.parser.prototype.initHead">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>initHead
        <span class="apidocSignatureSpan">(columnTitle)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initHead = function (columnTitle) {
  this.head = columnTitle;
  var wholeHead = columnTitle.replace(this.regExp, &#x27;&#x27;);
  //init type &#x26;&#x26; headStr
  var splitArr = wholeHead.split(&#x22;#!&#x22;);
  if (splitArr.length === 1) { //no explicit type
    this.headStr = splitArr[0];
  } else {
    var type = splitArr.shift();
    if (explicitTypes.indexOf(type.toLowerCase()) &#x3e; -1) {
      this.type = type;
      this.headStr = splitArr.join(&#x22;#!&#x22;);
    } else { //no explicit type
      this.headStr = wholeHead;
    }
  }
  if (!this.headStr) {
    this.headStr = wholeHead ? wholeHead : &#x22;Unknown Head&#x22;;
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// parser = parseRules[i];
// if (!parser) {
//   parser = parseRules[i] = getConstParser(i + 1, param);
// }
head = headRow[i];
if (!head || head === &#x22;&#x22;) {
  head = headRow[i] = &#x22;field&#x22; + (i + 1);
  // parser.<span class="apidocCodeKeywordSpan">initHead</span>(head);
}
var flag = getFlag(head, i, param)
if (flag === &#x27;omit&#x27;) {
  continue
}
if (param.checkType) {
  convertFunc = checkType(item, head, i, param)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.parse" id="apidoc.element.csvtojson.parser.prototype.parse">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>parse
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (params) {
  params.resultRow[params.head] = params.item;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  &#x22;cmd&#x22;: &#x22;parse&#x22;,
  &#x22;options&#x22;: {},
  &#x22;inputStream&#x22;: process.stdin
};

function parseObject(val, optional) {
  try {
    return JSON.<span class="apidocCodeKeywordSpan">parse</span>(val);
  } catch (e) {
    if (optional) {
      return val;
    } else {
      console.error(e);
      process.exit(1);
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.setParam" id="apidoc.element.csvtojson.parser.prototype.setParam">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>setParam
        <span class="apidocSignatureSpan">(param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setParam = function (param) {
  this.param = param;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return res;
}
function getConstParser(number, param) {
var inst = new Parser(&#x22;field&#x22; + number, /.*/, function (params) {
  var name = this.getName();
  params.resultRow[name] = params.item;
}, true);
inst.<span class="apidocCodeKeywordSpan">setParam</span>(param);
return inst;
}
function processRow(row, param, index) {
var i, item, parser, head;
var parseRules = param.parseRules;
if (param.checkColumn &#x26;&#x26; row.length != parseRules.length) {
  return {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parser.prototype.test" id="apidoc.element.csvtojson.parser.prototype.test">
        function <span class="apidocSignatureSpan">csvtojson.parser.prototype.</span>test
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">test = function (str) {
  return this.regExp &#x26;&#x26; this.regExp.test(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function dynamicType(item) {
var trimed = item.trim();
if (trimed === &#x22;&#x22;) {
  return stringType(item);
}
if (numReg.<span class="apidocCodeKeywordSpan">test</span>(trimed)) {
  return numberType(item)
} else if (trimed.length === 5 &#x26;&#x26; trimed.toLowerCase() === &#x22;false&#x22; || trimed.length === 4 &#x26;&#x26; trimed
.toLowerCase() === &#x22;true&#x22;) {
  return booleanType(item);
} else if (trimed[0] === &#x22;{&#x22; &#x26;&#x26; trimed[trimed.length - 1] === &#x22;}&#x22; || trimed[0] === &#x22;[&#x22; &#
x26;&#x26; trimed[trimed.length - 1] === &#x22;]&#x22;) {
  return jsonType(item);

} else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parserMgr" id="apidoc.module.csvtojson.parserMgr">module csvtojson.parserMgr</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.parserMgr.addParser" id="apidoc.element.csvtojson.parserMgr.addParser">
        function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>addParser
        <span class="apidocSignatureSpan">(name, regExp, parseFunc)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addParser(name, regExp, parseFunc) {
  var parser = new Parser(name, regExp, parseFunc,false); //TODO remove new
  registerParser(parser);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

How to add a customised parser:

```js
//Parser Manager
var parserMgr=require(&#x22;csvtojson&#x22;).parserMgr;

parserMgr.<span class="apidocCodeKeywordSpan">addParser</span>(&#x22;myParserName&#x22;,/^\*parserRegExp\*/,function (params){
   var columnTitle=params.head; //params.head be like: *parserRegExp*ColumnName;
   var fieldName=columnTitle.replace(this.regExp, &#x22;&#x22;); //this.regExp is the regular expression above.
   params.resultRow[fieldName]=&#x22;Hello my parser&#x22;+params.item;
});
```

parserMgr&#x27;s addParser function take three parameters:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parserMgr.getParser" id="apidoc.element.csvtojson.parserMgr.getParser">
        function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>getParser
        <span class="apidocSignatureSpan">(columnTitle, param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getParser(columnTitle, param) {
  var inst, parser;
  function getParserByName (parserName) {
    var parser;
    registeredParsers.forEach(function(p){
      if (p.getName() === parserName){
        parser=p;
      }
    });
    if (parser) {
      var inst = parser.clone();
      return inst;
    }
    return new Parser(); //TODO remove new
  }
  columnTitle = columnTitle ? columnTitle : &#x27;&#x27;;
  registeredParsers.forEach(function(p){
    if (p.test(columnTitle)){
      parser=p;
    }
  });
  if (parser) {
    inst = parser.clone();
    inst.head = columnTitle;
  } else {
    inst = getParserByName(&#x22;json&#x22;, columnTitle);
  }
  inst.setParam(param);
  inst.initHead(columnTitle);
  return inst;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
  it(&#x22;should  add a parser if regular expression is a string&#x22;, function() {
parserMgr.addParser(&#x22;myparserName&#x22;, &#x22;hello regexp&#x22;, function() {});
  });

  describe(&#x22;array parser&#x22;, function() {
it(&#x22;should return an array parser with specific column title&#x22;, function() {
  var parser = parserMgr.<span class="apidocCodeKeywordSpan">getParser</span>(&#x22;*array*myArray&#x22;);
  assert(parser.name === &#x22;array&#x22;);
});

it(&#x22;should parse as an array&#x22;, function() {
  var parser = parserMgr.getParser(&#x22;*array*myArray&#x22;);
  var resultRow = {};
  parser.parse({
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.csvtojson.parserMgr.initParsers" id="apidoc.element.csvtojson.parserMgr.initParsers">
        function <span class="apidocSignatureSpan">csvtojson.parserMgr.</span>initParsers
        <span class="apidocSignatureSpan">(row, param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initParsers(row, param) {
  var parsers = [];
  row.forEach(function (columnTitle) {
    parsers.push(getParser(columnTitle, param));
  });
  return parsers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
module.exports = function (lines, params, idx) {
  if (params._needParseJson) {
    if (!params._headers) {
      params._headers = [];
    }
    if (!params.parseRules) {
      var row = params._headers;
      params.parseRules = parserMgr.<span class="apidocCodeKeywordSpan">initParsers</span>(row, params);
    }
    return processRows(lines, params, idx);
  } else {
    return justReturnRows(lines, params, idx);
  }
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser_array" id="apidoc.module.csvtojson.parser_array">module csvtojson.parser_array</a></h1>




    <h2>
        <a href="#apidoc.element.csvtojson.parser_array.parserFunc" id="apidoc.element.csvtojson.parser_array.parserFunc">
        function <span class="apidocSignatureSpan">csvtojson.parser_array.</span>parserFunc
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parser_array(params) {
  var fieldName = params.head.replace(this.regExp, &#x27;&#x27;);
  if (params.resultRow[fieldName] === undefined) {
    params.resultRow[fieldName] = [];
  }
  params.resultRow[fieldName].push(params.item);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser_flat" id="apidoc.module.csvtojson.parser_flat">module csvtojson.parser_flat</a></h1>




    <h2>
        <a href="#apidoc.element.csvtojson.parser_flat.parserFunc" id="apidoc.element.csvtojson.parser_flat.parserFunc">
        function <span class="apidocSignatureSpan">csvtojson.parser_flat.</span>parserFunc
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parser_flat(params) {
   var key=this.getHeadStr();
   var val=params.item;
   params.resultRow[key]=val;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser_json" id="apidoc.module.csvtojson.parser_json">module csvtojson.parser_json</a></h1>




    <h2>
        <a href="#apidoc.element.csvtojson.parser_json.parserFunc" id="apidoc.element.csvtojson.parser_json.parserFunc">
        function <span class="apidocSignatureSpan">csvtojson.parser_json.</span>parserFunc
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parser_json(params) {
  var fieldStr = this.getHeadStr();
  var headArr = (params.config &#x26;&#x26; params.config.flatKeys) ? [fieldStr] : fieldStr.split(&#x27;.&#x27;);
  var match, index, key, pointer;
  //now the pointer is pointing the position to add a key/value pair.
  var pointer = processHead(params.resultRow, headArr, arrReg, params.config &#x26;&#x26; params.config.flatKeys);
  key = headArr.shift();
  match = (params.config &#x26;&#x26; params.config.flatKeys) ? false : key.match(arrReg);
  if (match) { // the last element is an array, we need check and treat it as an array.
    try {
      key = key.replace(match[0], &#x27;&#x27;);
      if (!pointer[key] || !(pointer[key] instanceof Array)) {
        pointer[key] = [];
      }
      if (pointer[key]) {
        index = match[1];
        if (index === &#x27;&#x27;) {
          index = pointer[key].length;
        }
        pointer[key][index] = params.item;
      } else {
        params.resultRow[fieldStr] = params.item;
      }
    } catch (e) {
      params.resultRow[fieldStr] = params.item;
    }
  } else {
    if (typeof pointer=== &#x22;string&#x22;){
      params.resultRow[fieldStr] = params.item;
    }else{
      pointer[key] = params.item;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser_jsonarray" id="apidoc.module.csvtojson.parser_jsonarray">module csvtojson.parser_jsonarray</a></h1>




    <h2>
        <a href="#apidoc.element.csvtojson.parser_jsonarray.parserFunc" id="apidoc.element.csvtojson.parser_jsonarray.parserFunc">
        function <span class="apidocSignatureSpan">csvtojson.parser_jsonarray.</span>parserFunc
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parser_jsonarray(params) {
  var fieldStr = params.head.replace(this.regExp, &#x22;&#x22;);
  var headArr = fieldStr.split(&#x27;.&#x27;);
  var pointer = params.resultRow;
  while (headArr.length &#x3e; 1) {
    var headStr = headArr.shift();
    if (pointer[headStr] === undefined) {
      pointer[headStr] = {};
    }
    pointer = pointer[headStr];
  }
  var arrFieldName = headArr.shift();
  if (pointer[arrFieldName] === undefined) {
    pointer[arrFieldName] = [];
  }
  pointer[arrFieldName].push(params.item);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.parser_omit" id="apidoc.module.csvtojson.parser_omit">module csvtojson.parser_omit</a></h1>




    <h2>
        <a href="#apidoc.element.csvtojson.parser_omit.parserFunc" id="apidoc.element.csvtojson.parser_omit.parserFunc">
        function <span class="apidocSignatureSpan">csvtojson.parser_omit.</span>parserFunc
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parser_omit() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.csvtojson.webServer" id="apidoc.module.csvtojson.webServer">module csvtojson.webServer</a></h1>


    <h2>
        <a href="#apidoc.element.csvtojson.webServer.startWebServer" id="apidoc.element.csvtojson.webServer.startWebServer">
        function <span class="apidocSignatureSpan">csvtojson.webServer.</span>startWebServer
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function startWebServer(args) {
    args = args || {};
    var serverArgs = {
        port: args.port || &#x27;8801&#x27;,
        urlpath: args.urlpath || &#x27;/parseCSV&#x27;
    };
    var server = http.createServer();
    server.on(&#x22;request&#x22;, function(req, res){
        if (req.url === serverArgs.urlpath &#x26;&#x26; req.method === &#x22;POST&#x22;){
            req.pipe(new Converter({constructResult:false})).pipe(res);
        } else {
            res.end(&#x22;Please post data to: &#x22; + serverArgs.urlpath);
        }
    });

    server.listen(serverArgs.port);
    console.log(&#x22;CSV Web Server Listen On:&#x22; + serverArgs.port);
    console.log(&#x22;POST to &#x22; + serverArgs.urlpath + &#x22; with CSV data to get parsed.&#x22;);
    return server;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // is.pipe(conv);
}

function run(cmd, options) {
  if (cmd === &#x22;parse&#x22;) {
    parse();
  } else if (cmd === &#x22;startserver&#x22;) {
    web.<span class="apidocCodeKeywordSpan">startWebServer</span>(options);
  } else if (cmd === &#x22;version&#x22;) {
    console.log(pkg.version);
  } else {
    console.log(&#x22;unknown command %s.&#x22;, cmd);
    _showHelp(1);
  }
}
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
